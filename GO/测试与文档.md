# 测试与文档

## 单元测试

```bash
$ go test -v -cover 																 # 测试全部 显示覆盖率  	
```

```go
// main_test.go
import (
	"testing"
	"github.com/stretchr/testify/assert"   // 断言库
)

func TestSquare(t *testing.T) {
	inputs := [...]int{1, 2, 3}
	expect := [...]int{1, 5, 9}
	for i := 0; i < len(inputs); i++ {
		ret := square(inputs[i])
		assert.Equal(t, expect[i], ret)
	}
}
```



```bash
$ go test -v -cover
=== RUN   TestSquare
    main_test.go:14: 
        	Error Trace:	main_test.go:14
        	Error:      	Not equal: 
        	            	expected: 5
        	            	actual  : 4
        	Test:       	TestSquare
--- FAIL: TestSquare (0.00s)
FAIL
coverage: 100.0% of statements
exit status 1
FAIL	gitlab.xinhulu.com/link/learn/tour-go-zh	0.002s

```



## 性能测试

```bash
$ go test -v -bench=. -benchmem -run="none" -benchtime="1s"
```



```go
func BenchmarkItoa(b *testing.B) {
    b.ResetTimer()
    number := 10
    for i := 0; i < b.N; i++ {
        strconv.Itoa(number)
    }
    b.StopTimer()
}
```

