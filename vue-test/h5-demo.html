<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>H5移动端演示</title>
    <!-- Vue 2.6 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <!-- Vant 2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@2/lib/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vant@2/lib/vant.min.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Helvetica, Segoe UI, Arial, Roboto, sans-serif;
            background-color: #f7f8fa;
        }
        
        .category-nav {
            display: flex;
            justify-content: space-around;
            padding: 20px 0;
            background: white;
            margin-bottom: 10px;
        }
        
        .category-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 12px;
        }
        
        .category-item img {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        
        .section {
            background: white;
            margin-bottom: 10px;
            padding: 15px;
        }
        
        .section-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .product-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }
        
        .product-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .product-info {
            padding: 10px;
        }
        
        .product-info h4 {
            margin: 0 0 5px 0;
            font-size: 14px;
            color: #333;
        }
        
        .price {
            margin: 5px 0;
            font-size: 16px;
            color: #ff6b35;
            font-weight: bold;
        }
        
        .login-content {
            padding: 40px 20px;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 20px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            padding: 20px;
            background: white;
            margin-bottom: 10px;
        }
        
        .user-detail {
            margin-left: 15px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- 首页 -->
        <div v-if="currentPage === 'home'">
            <!-- 搜索栏 -->
            <van-search v-model="searchKeyword" placeholder="搜索商品" />
            
            <!-- 轮播图 -->
            <van-swipe :autoplay="3000" indicator-color="white" style="height: 200px;">
                <van-swipe-item v-for="(banner, index) in banners" :key="index">
                    <img :src="banner.image" :alt="banner.title" style="width: 100%; height: 100%; object-fit: cover;" />
                </van-swipe-item>
            </van-swipe>
            
            <!-- 分类导航 -->
            <div class="category-nav">
                <div v-for="category in categories" :key="category.id" class="category-item" @click="goToCategory">
                    <img :src="category.icon" :alt="category.name" />
                    <span>{{ category.name }}</span>
                </div>
            </div>
            
            <!-- 热门商品 -->
            <div class="section">
                <div class="section-title">
                    <h3>热门商品</h3>
                    <span @click="viewMore">更多 ></span>
                </div>
                
                <div class="product-grid">
                    <div v-for="product in hotProducts" :key="product.id" class="product-card" @click="goToProduct(product)">
                        <img :src="product.image" :alt="product.name" />
                        <div class="product-info">
                            <h4>{{ product.name }}</h4>
                            <p class="price">¥{{ product.price }}</p>
                            <van-button size="mini" type="primary" @click.stop="addToCart(product)">
                                加入购物车
                            </van-button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 登录页面 -->
        <div v-if="currentPage === 'login'">
            <van-nav-bar title="用户登录" left-arrow @click-left="goBack" />
            <div class="login-content">
                <div class="logo">
                    <img src="https://img.yzcdn.cn/vant/cat.jpeg" alt="Logo" />
                    <h2>欢迎登录</h2>
                </div>
                
                <van-form @submit="handleLogin">
                    <van-field v-model="loginForm.phone" label="手机号" placeholder="请输入手机号" />
                    <van-field v-model="loginForm.password" type="password" label="密码" placeholder="请输入密码" />
                    
                    <div style="margin: 30px 0;">
                        <van-button round block type="primary" native-type="submit">登录</van-button>
                    </div>
                </van-form>
                
                <div style="text-align: center; margin-top: 20px;">
                    <p style="color: #999; font-size: 14px;">测试账号：13800138000 / 123456</p>
                </div>
            </div>
        </div>

        <!-- 购物车 -->
        <div v-if="currentPage === 'cart'">
            <van-nav-bar title="购物车" />
            
            <div v-if="cart.length === 0" style="text-align: center; padding: 50px 20px;">
                <van-empty description="购物车为空" />
                <van-button type="primary" @click="goShopping">去购物</van-button>
            </div>
            
            <div v-else>
                <div v-for="item in cart" :key="item.id" style="background: white; margin-bottom: 10px; padding: 15px; display: flex; align-items: center;">
                    <img :src="item.image" :alt="item.name" style="width: 60px; height: 60px; border-radius: 8px; margin-right: 15px;" />
                    <div style="flex: 1;">
                        <h4 style="margin: 0 0 5px 0; font-size: 14px;">{{ item.name }}</h4>
                        <p style="color: #ff6b35; font-weight: bold; margin: 0;">¥{{ item.price }}</p>
                    </div>
                    <van-stepper v-model="item.quantity" @change="updateQuantity" />
                </div>
                
                <van-submit-bar :price="cartTotal * 100" button-text="立即结算" @submit="checkout" />
            </div>
        </div>

        <!-- 个人中心 -->
        <div v-if="currentPage === 'profile'">
            <van-nav-bar title="我的" />
            
            <div v-if="!isLoggedIn" style="text-align: center; padding: 50px 20px;">
                <van-button type="primary" @click="goToLogin">请先登录</van-button>
            </div>
            
            <div v-else>
                <div class="user-info">
                    <van-image round width="60" height="60" :src="userInfo.avatar" />
                    <div class="user-detail">
                        <h3 style="margin: 0 0 5px 0;">{{ userInfo.username }}</h3>
                        <p style="margin: 0; color: #999;">{{ userInfo.phone }}</p>
                    </div>
                </div>
                
                <van-cell-group>
                    <van-cell title="我的订单" is-link />
                    <van-cell title="收藏夹" is-link />
                    <van-cell title="地址管理" is-link />
                    <van-cell title="设置" is-link />
                </van-cell-group>
                
                <div style="margin: 30px 15px;">
                    <van-button block type="danger" @click="handleLogout">退出登录</van-button>
                </div>
            </div>
        </div>

        <!-- 商品详情 -->
        <div v-if="currentPage === 'product'">
            <van-nav-bar title="商品详情" left-arrow @click-left="goBack" />
            
            <van-swipe :autoplay="3000" style="height: 300px;">
                <van-swipe-item v-for="(image, index) in currentProduct.images" :key="index">
                    <img :src="image" :alt="currentProduct.name" style="width: 100%; height: 100%; object-fit: cover;" />
                </van-swipe-item>
            </van-swipe>
            
            <div style="padding: 20px; background: white;">
                <h2 style="margin: 0 0 10px 0;">{{ currentProduct.name }}</h2>
                <p class="price">¥{{ currentProduct.price }}</p>
                <p style="color: #666; line-height: 1.5;">{{ currentProduct.description }}</p>
            </div>
            
            <van-goods-action>
                <van-goods-action-icon icon="chat-o" text="客服" />
                <van-goods-action-icon icon="cart-o" text="购物车" :badge="cartCount" @click="goToCart" />
                <van-goods-action-icon icon="star-o" text="收藏" />
                <van-goods-action-button type="warning" text="加入购物车" @click="addToCart(currentProduct)" />
                <van-goods-action-button type="danger" text="立即购买" @click="buyNow" />
            </van-goods-action>
        </div>

        <!-- 底部导航 -->
        <van-tabbar v-model="activeTab" @change="onTabChange">
            <van-tabbar-item icon="home-o">首页</van-tabbar-item>
            <van-tabbar-item icon="apps-o">分类</van-tabbar-item>
            <van-tabbar-item icon="shopping-cart-o" :badge="cartCount">购物车</van-tabbar-item>
            <van-tabbar-item icon="user-o">我的</van-tabbar-item>
        </van-tabbar>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                currentPage: 'home',
                activeTab: 0,
                isLoggedIn: false,
                searchKeyword: '',
                loginForm: {
                    phone: '13800138000',
                    password: '123456'
                },
                userInfo: {
                    username: '',
                    phone: '',
                    avatar: 'https://img.yzcdn.cn/vant/cat.jpeg'
                },
                banners: [
                    { title: '轮播图1', image: 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-1.jpeg' },
                    { title: '轮播图2', image: 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-2.jpeg' }
                ],
                categories: [
                    { id: 1, name: '手机', icon: 'https://img.yzcdn.cn/vant/cat.jpeg' },
                    { id: 2, name: '电脑', icon: 'https://img.yzcdn.cn/vant/cat.jpeg' },
                    { id: 3, name: '家电', icon: 'https://img.yzcdn.cn/vant/cat.jpeg' },
                    { id: 4, name: '服装', icon: 'https://img.yzcdn.cn/vant/cat.jpeg' }
                ],
                hotProducts: [
                    {
                        id: 1,
                        name: 'iPhone 15',
                        price: 5999,
                        image: 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-1.jpeg',
                        images: ['https://fastly.jsdelivr.net/npm/@vant/assets/apple-1.jpeg', 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-2.jpeg'],
                        description: '全新iPhone 15，搭载A17芯片，支持USB-C接口。'
                    },
                    {
                        id: 2,
                        name: 'MacBook Pro',
                        price: 12999,
                        image: 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-2.jpeg',
                        images: ['https://fastly.jsdelivr.net/npm/@vant/assets/apple-2.jpeg', 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg'],
                        description: '强大的MacBook Pro，专业级性能。'
                    },
                    {
                        id: 3,
                        name: 'iPad Air',
                        price: 3999,
                        image: 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg',
                        images: ['https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg', 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-4.jpeg'],
                        description: '轻薄强大的iPad Air。'
                    },
                    {
                        id: 4,
                        name: 'AirPods Pro',
                        price: 1999,
                        image: 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-4.jpeg',
                        images: ['https://fastly.jsdelivr.net/npm/@vant/assets/apple-4.jpeg', 'https://fastly.jsdelivr.net/npm/@vant/assets/apple-1.jpeg'],
                        description: '主动降噪的AirPods Pro。'
                    }
                ],
                cart: [],
                currentProduct: {}
            },
            computed: {
                cartCount() {
                    return this.cart.reduce((total, item) => total + item.quantity, 0)
                },
                cartTotal() {
                    return this.cart.reduce((total, item) => total + item.price * item.quantity, 0)
                }
            },
            methods: {
                onTabChange(index) {
                    const pages = ['home', 'category', 'cart', 'profile']
                    this.currentPage = pages[index]
                },
                goToLogin() {
                    this.currentPage = 'login'
                    this.activeTab = null
                },
                goBack() {
                    this.currentPage = 'home'
                    this.activeTab = 0
                },
                goToCart() {
                    this.currentPage = 'cart'
                    this.activeTab = 2
                },
                goShopping() {
                    this.currentPage = 'home'
                    this.activeTab = 0
                },
                goToCategory() {
                    this.$toast('分类功能开发中...')
                },
                goToProduct(product) {
                    this.currentProduct = product
                    this.currentPage = 'product'
                    this.activeTab = null
                },
                viewMore() {
                    this.$toast('更多商品功能开发中...')
                },
                addToCart(product) {
                    const existItem = this.cart.find(item => item.id === product.id)
                    if (existItem) {
                        existItem.quantity += 1
                    } else {
                        this.cart.push({
                            ...product,
                            quantity: 1
                        })
                    }
                    this.$toast('已添加到购物车')
                },
                updateQuantity() {
                    // 更新购物车数量
                },
                checkout() {
                    this.$toast('结算功能开发中...')
                },
                buyNow() {
                    this.$toast('立即购买功能开发中...')
                },
                handleLogin() {
                    if (this.loginForm.phone === '13800138000' && this.loginForm.password === '123456') {
                        this.isLoggedIn = true
                        this.userInfo = {
                            username: this.loginForm.phone,
                            phone: this.loginForm.phone,
                            avatar: 'https://img.yzcdn.cn/vant/cat.jpeg'
                        }
                        this.$toast.success('登录成功')
                        this.currentPage = 'home'
                        this.activeTab = 0
                    } else {
                        this.$toast.fail('手机号或密码错误')
                    }
                },
                handleLogout() {
                    this.$dialog.confirm({
                        message: '确定要退出登录吗？'
                    }).then(() => {
                        this.isLoggedIn = false
                        this.cart = []
                        this.userInfo = { username: '', phone: '', avatar: '' }
                        this.$toast.success('退出成功')
                        this.currentPage = 'home'
                        this.activeTab = 0
                    })
                }
            }
        })
    </script>
</body>
</html>