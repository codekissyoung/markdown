# 编码 隐匿在计算机软硬件背后的语言

《编码 隐匿在计算机软硬件背后的语言》一书的笔记。

## 1. 手电筒通信

`... --- ...`是字母`SOS`的莫斯编码。

## 2. 编码与组合

通过一张`.`与`-`的树形图，译码过程更直观方便:

![莫斯编码图](https://img.codekissyoung.com/2019/08/12/dd541a9b02e95d4308f319ec03e84923.png)

## 3. 布莱叶盲文与二进制编码

![布莱叶盲文](https://img.codekissyoung.com/2019/08/12/a4deae14350d7cf9b78c10a683a46dc4.png)

二进制码:编码的组成元素只有两个，比如`.`和`-`、`0`和`1`。

## 4. 手电筒的原理

讲了物理学上对电的一些认识。

## 5. 双向莫斯电码系统

下图，包含的元素包括:电压、开关、灯泡、接地。开关合上后，电压与接地形成电子通路，电子流经灯泡，使灯泡发光。

![双向莫斯电码系统](https://img.codekissyoung.com/2019/08/12/3825ac249478b845dd7c1cc843a0d75f.png)

## 6. 电报机与继电器

1844年，第一条电报线路在华盛顿假设完成，传输了第一条消息`What hath God wrought`。下图是电报机的原理，一端电报按键控制另一端的电磁铁。

![电报机](https://img.codekissyoung.com/2019/08/12/1e4f7e9d82bf58c8a7ace2da9097fa14.png)

为了解决长距离电线，电阻增大，信号衰退的问题，设计出了继电器，原理如下。

![继电器](https://img.codekissyoung.com/2019/08/12/3795868e228621cafe2a3e7e2f58003e.png)

## 7. 十进制计数法

阿拉伯数字系统，符号（0123456789ABCDEF等） + 位置（个位、十位、百位）组合表示一个数字。 

![十进制数](https://img.codekissyoung.com/2019/08/13/c746c8026b66e2d08d676e9c77fea98e.png)

## ８．十进制的替代品 其他进制数

### 八进制

![深度截图_选择区域_20190813160728.png](https://img.codekissyoung.com/2019/08/13/dc2c7ac86c55f621d7020f47484ad20a.png)

八进制乘法表:

![深度截图_选择区域_20190813155057.png](https://img.codekissyoung.com/2019/08/13/48772321f4538ab9a5d011094e7f43cc.png)

### 四进制

![深度截图_选择区域_20190813160403.png](https://img.codekissyoung.com/2019/08/13/d2a9fccd8b992c2a4ceb7d397c98d62a.png)

### 二进制

二进制加法:

![深度截图_选择区域_20190813161051.png](https://img.codekissyoung.com/2019/08/13/dd79a6c390b0f5b47f1e8d25ef2e1a4d.png)

二进制乘法:

![深度截图_选择区域_20190813161143.png](https://img.codekissyoung.com/2019/08/13/d9296b1bfc3f59032b4ae023ad9edbf6.png)

## 9.二进制数

![深度截图_选择区域_20190813173414.png](https://img.codekissyoung.com/2019/08/13/bd78fb067dd3ad9805ffb23ee0af325a.png)

![深度截图_选择区域_20190813175740.png](https://img.codekissyoung.com/2019/08/13/8f180956ca0ae338e78a19a5dc7d3f7f.png)

商品的条形码:

- 扫码时，要么正向扫，依据编码表得到`0 51000 01251 7` 这串数字
- 逆向扫，依据逆向的编码表得到:`7 15210 00015 0`这串数字

## 10. 逻辑与开关

![深度截图_选择区域_20190813193931.png](https://img.codekissyoung.com/2019/08/13/53e57280f28ec44f21d1d6c2a82e0646.png)

## 11. 门电路

与门:

![深度截图_选择区域_20190813193259.png](https://img.codekissyoung.com/2019/08/13/408c93c05019b054865d2fb37d1e715b.png)

![深度截图_选择区域_20190813193419.png](https://img.codekissyoung.com/2019/08/13/1adbe1dd849f2f5abf22cd1856b01715.png)

或门:

![深度截图_选择区域_20190813194544.png](https://img.codekissyoung.com/2019/08/13/8c18c10c3ea8be397546920bbce412de.png)

![深度截图_选择区域_20190813194655.png](https://img.codekissyoung.com/2019/08/13/ba7666457f17b5665f98b4bb68f6d4b1.png)

非门:

![深度截图_选择区域_20190813193707.png](https://img.codekissyoung.com/2019/08/13/460d1eccab82dfb352b49cae060f53f2.png)

或非门:

![深度截图_选择区域_20190815153945.png](https://img.codekissyoung.com/2019/08/15/23ea35e700edebadd3e3a28777a6961e.png)

与非门:

![深度截图_选择区域_20190815154221.png](https://img.codekissyoung.com/2019/08/15/942679e7aee5d372298a367493f3f27d.png)

异或门:

![深度截图_选择区域_20190815154433.png](https://img.codekissyoung.com/2019/08/15/a547377b66cd6b13a11dc21aa9fbd29e.png)


## 12. 二进制加法器

加法计算是计算机需要实现的唯一工作。如果可以实现加法器，那么就可以利用加法器来实现减法、乘法和除法计算。

二进制的加法表:

![深度截图_选择区域_20190815152953.png](https://img.codekissyoung.com/2019/08/15/83a05f3e44e148234cd7c1ba7fce484a.png)

用逻辑电路来实现上述加法表:

![深度截图_选择区域_20190815153241.png](https://img.codekissyoung.com/2019/08/15/390b42fe6be59520ef6bd5cb6a17bbcc.png)

就构成了一个半加器，它只能用来算1位二进制数的，也就是说，它只能计算出两个任意二进制数的最低位。

![深度截图_选择区域_20190815154722.png](https://img.codekissyoung.com/2019/08/15/9637920298f5d1d3a040e7e2ad6de71b.png)

对于上图二进制加法，右数第二位的相加后，还需要与低位产生的进位再次相加，才能得到结果，所以设计出了全加器:

![深度截图_选择区域_20190815155304.png](https://img.codekissyoung.com/2019/08/15/9b64528f15a45b3db94ff4683f5abb8c.png)

### 一个8位的二进制加法器

操作界面图:

上面的开关是人操作的，用于输入两个二进制数，确定两个二进制数后，下面的指示灯的明灭代表输出的二进制数的`0`和`1`。

![深度截图_选择区域_20190815155521.png](https://img.codekissyoung.com/2019/08/15/dc248d474903dba7d062de50b123a845.png)

实现:

最低位:没有进位，所以进位输入接地，表示`0`

![深度截图_选择区域_20190815160054.png](https://img.codekissyoung.com/2019/08/15/644986b76298376094b4f122e7e49c68.png)

中间位数:全加器依次相联

![深度截图_选择区域_20190815160208.png](https://img.codekissyoung.com/2019/08/15/2309aefb8f1778a43cb9872dea478a57.png)

最高位:进位接灯泡

![深度截图_选择区域_20190815160253.png](https://img.codekissyoung.com/2019/08/15/b4eddf698996460d26c50ce3422a1c94.png)

合在一起就是:

![深度截图_选择区域_20190815160405.png](https://img.codekissyoung.com/2019/08/15/adbe4ceb5ba63af272106cf6722a8c0f.png)

8位加法器简化:

![深度截图_选择区域_20190815160803.png](https://img.codekissyoung.com/2019/08/15/c5e2447bff078d8901627e251658e7d9.png)

再次简化:

![深度截图_选择区域_20190815160844.png](https://img.codekissyoung.com/2019/08/15/251dd970a3f39970fe6d4ad3b54b1b4f.png)

因此我们可以很容易画出16位加法器的设计图:

![深度截图_选择区域_20190815160950.png](https://img.codekissyoung.com/2019/08/15/4e402c31c02a8b66a67f9dcdd6c0f6f0.png)

## 13. 如何实现减法

理论上来说可以参考加法器的设计方法和思路，设计出一个减法器。但是这样子的话，计算机的运算器实现里面就有两种电路的存在，一种加法器电路，一个减法器电路。这样的实现必定是浪费材料和空间的。那么能不能找到一种方法，让减法也可以通过加法器完成。

在自然数学中，`16 - 8 = 8`可以写成`16 + (-8) = 8`，`23 - 87 = -64`可以写成`23 + (-87) = -64`，那么参考加法器的构造:

![深度截图_选择区域_20190815160844.png](https://img.codekissyoung.com/2019/08/15/251dd970a3f39970fe6d4ad3b54b1b4f.png)

于是，我们有了:

```
0001 0000(16)   - ?(-8) = 0000 1000(8)
0001 0111(23)   - ?(-87) = ?(-64)
```

加法器的B输入是一个负数，那么这个负数的二进制表示是什么，才能够使上述等式成立，并且输出的数据，我们通过8位加法器的灯也能读懂。

我们可以先来考虑一个简单的:

```
0000 0001(1) + ?(-1) = 0000 0000(0) 
```

同时我们也知道，加法器中:
```
0000 0001(1) + 1111 1111(255) = 1 0000 0000(256)
```

上面式子中的`1`是进位，如果我们不看进位的值，即将进位舍去，那么我们使用`1111 1111`这个二进制数作为`-1`的二进制表示:

```
0000 0001(1) + 1111 1111(-1) = 1 0000 0000(0) 
```

同理，我们可以:

```
0000 1000(8) + ?(-8) = 1 0000 0000(0)  
```

推算可知，能够符合加法器运算的，`-8`的二进制是`1111 1000`。

观察下，该二进制也可以写成`1111 0111 + 0000 0001`，也就是`8`的二进制数的每一位取反后，再加上`1`。

根据以上讨论，我们可以得出下表:
```
二进制数      表示的十进制数
1000 0000    -128
1000 0001    -127
1000 0010    -126
...
1111 1101    -3
1111 1110    -2
1111 1111    -1
0000 0000    0
0000 0001    1
0000 0010    2
0000 0011    3
...
0111 1110    126
0111 1111    127
```
可以验证下，上表的二进制数，可以通过加法器的运算正确的表示8进制加减法。当执行`126 + 125`或者`-123 - 78`这样的运算时，8位加法器的进位的值为`1`，表示这个算式产生的结果已经无法使用8位二进制数表示。所以对于8位加法器，只能够表达有限整数范围内的算数运算。这个有限范围指的是，A输入、B输入以及最后的计算结果都要落在`-128 ~ 127`这个范围内，否则就是溢出错误。

我们将这种方式推广到64位加法器，这样能够表达的运算范围就非常大了。


## １４．反馈与触发器

### 蜂鸣器

开关连通后，电路闭合(图二)，电磁铁把弹簧拉下从而电路断开(图三)，电磁铁失去磁力弹片回到原来位置，电路又闭合(图四)，周而复始。

![深度截图_选择区域_20190815191430.png](https://img.codekissyoung.com/2019/08/15/28899fa6b082a8180865138d775602fc.png)

改良后的蜂鸣器:

![深度截图_选择区域_20190815192301.png](https://img.codekissyoung.com/2019/08/15/c8a57b061cf86bf039177bb82bcfedfa.png)

### 振荡器

左边图是取反器(非门)，如果将它的输出连接到输入，就构成了一个蜂鸣器(图中)，逻辑图见右上角，这段线路的输出在周期时间内一直在`0`与`1`之间震荡。每秒钟震荡的次数称为赫兹，是计量单位。

![深度截图_选择区域_20190815195104.png](https://img.codekissyoung.com/2019/08/15/b2ac6bf5920472164009b2c1fa8c2ebc.png)

### 触发器电路

下图是使用或非门构建的一个触发器电路，上面的开关闭合使点亮灯泡，当它断开时，灯泡保持亮状态:

![深度截图_选择区域_20190815200521.png](https://img.codekissyoung.com/2019/08/15/625c758517ceb9706082d886869129b2.png)

下图，当下面开关闭合时，灯泡关闭，当开关断开时，灯泡仍然保持关闭状态:

![深度截图_选择区域_20190815200810.png](https://img.codekissyoung.com/2019/08/15/0326e2b9f8c7c50d007b4396bbef7184.png)

这就是触发器电路，当两个开关都断开时，电路处于两个稳定状态之一，也就是说它有记忆性，可以记住最近一次时哪个开关闭合了。

上面是触发器最简单的一种，称为`R-S`触发器，也叫作`R-S`锁存器。

![深度截图_选择区域_20190815205216.png](https://img.codekissyoung.com/2019/08/15/094212081756198156d81137fe8bdeb9.png)