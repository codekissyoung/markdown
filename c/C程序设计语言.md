# C程序设计语言笔记

## 前言

BCPL和B语言是C语言的前身，都是“无类型”的语言。C语言提供了许多数据类型。基本类型：字符、具有多种长度的整形和浮点型。另外还通过指针、数组、结构和联合派生出各种数据类型。

表达式由运算符合操作数组成,包括赋值表达式或函数表达式。

指针提供了与具体机器无关的地址算术运算符。

C实现了基本控制流结构：语句组、`if-else`条件判断、`switch`多路选择、`while for`终止测试在顶部的循环、终止测试在底部的循环`do`、提前跳出循环`break`、跳过循环的某一步`continue`。

C是一种工作在`low level`的语言。指的是C语言可以处理大部分计算机能够处理的对象，比如字符、数字和地址。这些对象可以通过具体机器实现的算术运算符和逻辑运算符组合在一起并移动。

C语言不提供直接处理诸如字符串、集合、列表或数组等复合对象的操作。虽然可以将整个结构作为一个单元进行拷贝，但C语言没有处理整个数组或字符串的操作。

除了由函数的局部变量提供的静态定义和堆栈外，C语言没有定义任何存储器分配工具，也不提供堆和无用内存回收工具。最后，C语言本身没有提供输入/输出功能，没有READ和WRITE语句，也没有内置的文件访问方法。所有这些高层的机制必须由显式调用的函数提供。C语言的大部分实现已经合理地包含了这些函数的标准集合。

类似的，C语言只提供简单的单线程控制流、即测试、循环、分组、和子程序。它不提供多道程序设计、并行操作、同步和协同例程。

C标准库描述了如何访问操作系统（如读写文件）、格式化输入/输出、内存分配和字符串操作等类似的很多函数，定义了一系列标准头文件，它们为访问函数声明和数据类型声明提供了统一的方法。这就确保了使用这个函数库与宿主系统进行交互的程序之间具有兼容的行为。

大多数计算机本身就直接支持C语言提供的数据类型和控制结构，因此只需要一个很小的运行时库就可以实现自包含程序。由于程序只能够显示地调用标准库中的函数，因此在不需要的情况下就可以避免对这些函数的调用。除了其中隐藏的一些操作系统细节外，大部分库函数可以用C语言编写，并且一直。

C语言并不是一种强类型的语言，但随着它的发展，其类型检查机制已经得到了加强。尽管C语言的最初定义不赞成在指针和整形变量之间交换值，但并没有禁止，不过现在已经禁止这种做法了。ANSI要求对变量进行正确的声明和显式的强制类型转换。编译器将对大部分的数据类型错误发出警告，并且不自动执行不兼容数据类型之间的类型转换。

## 第一章 对C语言核心部分简要介绍

- 打印`hello world`
- 变量与算术表达式,温度表转换程序
- `#define`符号常量
- 字符输入/输出,`c = getchar();`从输入里获取一个字符,`putchar(c);`以字符形式输出一个字符/数字
- 文件结尾`EOF`，`while( (c = getchar()) != EOF )` 判断文件结尾
- `c == '\\n'` 判断字符相等，判断一行结束
- 数组，多个相同类型的变量连续存储在一起，整个存储的数据块叫数组，使用下标访问每个元素，下标从`0`开始计数
- 字符数组，即字符串，`"string\\n"` 等价于 `s t r i n g \\n \\0`, C 里面的字符串在实现上就是以`\\0`结尾的字符数组
- 函数，封装计算的一种简便方法
  - 参数，传值调用,被调用函数不能直接修改主调函数中变量的值，而只能修改其私有的临时副本的值
- 外部变量与作用域
  - 在函数内部定义的变量称为`内部变量`，在函数执行时存在，函数执行完毕返回后消失
  - 在函数外定义的变量，称为`外部变量`，在任意函数内部都可以使用，因此C的函数可以通过外部变量交换数据，而不必使用参数表
  - `外部变量`在程序执行期间一直存在

## 第二章 类型、运算符与表达式

- 变量名
- 数据类型及长度
- 常量
- 声明
- 算术运算符 `+` `-`, 关系运算符`==` `!=`,逻辑运算符 `||` `&&`
- 类型转换，允许字节小的类型自动转换为字节大的类型存储

## 第三章 控制流

## 第四章 函数和程序结构 外部变量、作用域规则、多源文件、预处理器

## 第五章 指针和地址运算

### 指针

- 指针可以加上或者减去一个整数，移动的字节数依据指针的类型进行计算
- 指向某一类型的指针可以转换为指向另一类型的指针，但是如果该指针指向的对象不满足一定的存储对齐要求，则使用该指针可能导致地址异常
- 可以将指针强制转换为任意类型的指针，并且可以原封不动地再次转回本类型指针，包括函数类型指针也是一样

## 第六章 结构和联合

## 第七章 标准库

## 第八章 C语言与UNIX之间的接口

## 附录A 语言参考手册

- 词法规则：程序由存储在文件中的多个翻译单元`translation unit`组成，翻译的第一步是预处理，将所有的`#`宏展开，得到一个记号序列
- 记号：`标识符` `关键字` `常量` `字符串字面值` `运算符` `分隔符(空格 换行 制表符等)` 共6类记号，编译时，被分隔符隔开的最长字符串构成记号，即贪心算法
- 标识符: 字母和数字构成的序列。比如变量名，函数名，结构名，对标识符的解析依赖两个主要属性:`存储类` 和 `类型`
- 存储类
  - 自动存储类:这类对象对于一个程序块(函数等)来说是局部的，退出程序块时，该对象消失
  - 静态存储类:程序运行结束才消失的对象类，可以是某个程序块的局部对象，在函数内部用`static`声明; 在所有程序块外部定义的对象默认是静态的，而用`static`声明则表示只供本文件访问
- 类型
  - 基本类型: `int` `double` 等
  - 复合类型: 数组，结构体，指向给定类型对象的指针，联合体
- 关键字: `int` `double` `if` 等
- 左值: `lvalue`
- 自动类型转换：`int`在和`double`运算时，自动转为`double`类型等

## 附录B 对标准库的总结

## 附录C C语言版本更新的总结

> 各个特定的编译器是解释语言的最终权威。